<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Realtime Speech Test (KNOWN WORKING)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; background:#111; color:#0f0; padding:20px; }
    button { font-size:16px; padding:10px 16px; margin-right:10px; }
    #out { margin-top:20px; font-size:18px; white-space:pre-wrap; }
  </style>
</head>
<body>
  <h2>ðŸŽ¤ Speech Recognition â€“ Debug Version</h2>
  <p>This page ONLY tests microphone â†’ text. If this does not work, nothing else will.</p>

  <button id="start">Start</button>
  <button id="stop">Stop</button>

  <div id="out">(waiting...)</div>

<script>
// ===== VERY BASIC, PROVEN SETUP =====
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

if (!SpeechRecognition) {
  document.getElementById('out').textContent = 'âŒ SpeechRecognition NOT supported in this browser.';
  throw new Error('Not supported');
}

const rec = new SpeechRecognition();
rec.lang = 'en-US';
rec.continuous = true;
rec.interimResults = true;

const out = document.getElementById('out');

rec.onstart = () => {
  out.textContent = 'ðŸŽ§ Listening... Speak now.';
};

rec.onresult = (e) => {
  let text = '';
  for (let i = 0; i < e.results.length; i++) {
    text += e.results[i][0].transcript;
  }
  out.textContent = text;
};

rec.onerror = (e) => {
  out.textContent = 'âŒ Error: ' + e.error + '\n\n' +
    'Common fixes:\n' +
    '- Use Chrome desktop\n' +
    '- Allow microphone permission\n' +
    '- Use HTTPS or http://localhost\n' +
    '- Do NOT open as file://';
};

rec.onend = () => {
  out.textContent += '\n\n(recognition stopped)';
};

// ===== CONTROLS =====
document.getElementById('start').onclick = () => rec.start();
document.getElementById('stop').onclick = () => rec.stop();
</script>
</body>
</html>
